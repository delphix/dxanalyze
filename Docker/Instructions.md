***
# PYDXANALYZE #
pydxAnalyze report can be generated in **offline** or **online** mode.  
**offline**  : Take input as existing data generated by dxtoolkit2 and generate report  
**online**  : Collect live input of data from delphix engine and generate report

## OFFLINE MODE ##
This mode is useful when you don't have connectivity to delphix engine and want to troubleshoot performance issue OR do capacity planning offline. 

#### Step 1 : Generate delphix  analytics data using dxtoolkit2.
This step is outside docker. Please download dxtoolkit2 from [delphix/github](https://github.com/delphix/dxtoolkit/releases) and execute following command to generate data required to generate analytics report.

    dx_get_analytics -d <eng_name> -t all -i 60 -outdir . 
    OR
    dx_get_analytics -d <eng_name> -t cpu,disk,nfs,networkl -i 60 -outdir . 
    OR
    dx_get_analytics -d <eng_name> -t cpu,disk,iscsi,networkl -i 60 -outdir . 
    OR
    dx_get_analytics -d <eng_name> -t cpu,disk,nfs,iscsi,networkl -i 60 -outdir . 

For more info please refer [dx_get_analytics](https://github.com/delphix/dxtoolkit/wiki/dx_get_analytics "Details of dx_get_analytics from dxtoolkit")

***

#### Step 2 : Download pydxanalyze docker image

    docker pull ajayjt/pydxanalyze:latest

***

#### Step 3 : Run Container using

    docker run -it -v <full_path_to_csv_data_folder>:/process ajayjt/pydxanalyze:latest pydxanalyze offline --file_prefix '<file_prefix>'

    where 
    <file_prefix>  = prefix of file generated by dx_get_analytics   e.g. dlpxprieng01
    <full_path_to_csv_data_folder>  = folder consisting of csv data files generated by dx_get_analytics dxtoolkit script  e.g. dlpxprieng01

***
#### Example

    docker run -it -v /Users/ajay.thotangare/mydata/dlpxprieng01:/process ajayjt/pydxanalyze:latest pydxanalyze offline --file_prefix dlpxprieng01

This will generate analytics report in folder /Users/ajay.thotangare/mydata/dlpxprieng01 with name <file_prefix>_analytics.pptx e.g. **dlpxprieng01_analytics.pptx**

***
#### Sample Output
    delphix@ubuntu-16-04:~$ pwd  
    /export/home/delphix
    
    delphix@ubuntu-16-04:~$ ls -l
    drwxr-xr-x 2 delphix delphix 4096 Apr  8 20:26 dlpxprieng01
    
    delphix@ubuntu-16-04:~$ ls -l dlpxprieng01/*
    -rwxr-xr-x 1 delphix delphix    280 Jun 15  2018 csvdata/dlpxprieng01-analytics-cpu-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 257073 Jun 15  2018 csvdata/dlpxprieng01-analytics-cpu-raw.csv
    -rwxr-xr-x 1 delphix delphix   1186 Jun 15  2018 csvdata/dlpxprieng01-analytics-disk-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 388751 Jun 15  2018 csvdata/dlpxprieng01-analytics-disk-raw.csv
    -rwxr-xr-x 1 delphix delphix   1134 Jun 15  2018 csvdata/dlpxprieng01-analytics-iscsi-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 620087 Jun 15  2018 csvdata/dlpxprieng01-analytics-iscsi-raw.csv
    -rwxr-xr-x 1 delphix delphix    704 Jun 15  2018 csvdata/dlpxprieng01-analytics-network-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 383600 Jun 15  2018 csvdata/dlpxprieng01-analytics-network-raw.csv
    -rwxr-xr-x 1 delphix delphix   1708 Jun 15  2018 csvdata/dlpxprieng01-analytics-nfs-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 636640 Jun 15  2018 csvdata/dlpxprieng01-analytics-nfs-raw.csv
    
    delphix@ubuntu-16-04:~$ docker images
    REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
    
    delphix@ubuntu-16-04:~$ docker pull ajayjt/pydxanalyze:latest
    1: Pulling from ajayjt/pydxanalyze
    e79bb959ec00: Pull complete 
    .......
    .......
    .......
    Status: Downloaded newer image for ajayjt/pydxanalyze
    
    delphix@ubuntu-16-04:~$ docker images
    REPOSITORY             TAG               IMAGE ID                 CREATED                 SIZE
    ajayjt/pydxanalyze   latest            0c93c00b3a16        35 minutes ago      360MB
    
    delphix@ubuntu-16-04:~$ docker run -it -v /Users/ajay.thotangare/mydata/dlpxprieng01:/process ajayjt/pydxanalyze:latest pydxanalyze offline --file_prefix dlpxprieng01
    0c93c00b3a16455682eedb267f77f42c1bf23aa19462d8238211146dd11621f1e
    
    delphix@ubuntu-16-04:~$ ls -l dlpxprieng01/*
    -rwxr-xr-x 1 delphix delphix    280 Jun 15  2018 dlpxprieng01-analytics-cpu-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 257073 Jun 15  2018 dlpxprieng01-analytics-cpu-raw.csv
    -rwxr-xr-x 1 delphix delphix   1186 Jun 15  2018 dlpxprieng01-analytics-disk-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 388751 Jun 15  2018 dlpxprieng01-analytics-disk-raw.csv
    -rwxr-xr-x 1 delphix delphix   1134 Jun 15  2018 dlpxprieng01-analytics-iscsi-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 620087 Jun 15  2018 dlpxprieng01-analytics-iscsi-raw.csv
    -rwxr-xr-x 1 delphix delphix    704 Jun 15  2018 dlpxprieng01-analytics-network-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 383600 Jun 15  2018 dlpxprieng01-analytics-network-raw.csv
    -rwxr-xr-x 1 delphix delphix   1708 Jun 15  2018 dlpxprieng01-analytics-nfs-aggregated.csv
    -rwxr-xr-x 1 delphix delphix 636640 Jun 15  2018 dlpxprieng01-analytics-nfs-raw.csv
    -rwxr-xr-x 1 delphix delphix 636640 Jun 30  2018 dlpxprieng01-analytics.pptx

## ONLINE MODE ##
This mode is useful when you have connectivity to delphix engine and want to generate data live for troubleshooting or capacity planning. 
#### Step 1 : Download pydxanalyze docker image

    docker pull ajayjt/pydxanalyze:latest

***

#### Step 2 : Run Container using

    docker run -it -v <full_path_to_csv_data_folder>:/process ajayjt/pydxanalyze:latest pydxanalyze online -e <delphix_appliance_name/ip>  -u <delphix_admin_username> -p <delphix_password>

    where 
    <delphix_appliance_name/ip>  = Name or IP Address of delphix engine   e.g. dlpxprieng01.xyz.com
    <delphix_admin_username>  = Delphix Admin username 
    <delphix_password>  = Delphix Admin password 
***
#### Example

    docker run -it -v /Users/ajay.thotangare/mydata/dlpxprieng01:/process ajayjt/pydxanalyze:latest pydxanalyze online -e dlpxprieng01.xyz.com -u admin -p xxxxxxx

This will generate analytics report in folder /Users/ajay.thotangare/mydata/dlpxprieng01 with name <file_prefix>_analytics.pptx e.g. **dlpxprieng01_analytics.pptx**

***
#### Sample Output
    delphix@ubuntu-16-04:~$ pwd  
    /export/home/delphix
    
    delphix@ubuntu-16-04:~$ ls -l
    drwxr-xr-x 2 delphix delphix 4096 Apr  8 20:26 dlpxprieng01
    
    delphix@ubuntu-16-04:~$ ls -l dlpxprieng01/*
    
    delphix@ubuntu-16-04:~$ docker images
    REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
    
    delphix@ubuntu-16-04:~$ docker pull ajayjt/pydxanalyze:latest
    1: Pulling from ajayjt/pydxanalyze
    e79bb959ec00: Pull complete 
    .......
    .......
    .......
    Status: Downloaded newer image for ajayjt/pydxanalyze
    
    delphix@ubuntu-16-04:~$ docker images
    REPOSITORY             TAG               IMAGE ID                 CREATED                 SIZE
    ajayjt/pydxanalyze   latest            0c93c00b3a16        35 minutes ago      360MB
    
    delphix@ubuntu-16-04:~$ docker run -it -v /Users/ajay.thotangare/mydata/dlpxprieng01:/process ajayjt/pydxanalyze:latest pydxanalyze online -e dlpxprieng01.xyz.com -u admin -p xxxxxxx
    0c93c00b3a16455682eedb267f77f42c1bf23aa19462d8238211146dd11621f1e
    
    delphix@ubuntu-16-04:~$ ls -l dlpxprieng01/*
    -rwxr-xr-x 1 delphix delphix 636640 Jun 30  2018 dlpxprieng01-analytics.pptx

